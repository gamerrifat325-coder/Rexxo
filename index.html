<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google-site-verification" content="IXp8EtdnajyjawoHcwetfqByzOUobObm69_VRGP20EM" />
<title>RexxoTube</title>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:white;}
header{background:black;padding:12px;display:flex;justify-content:space-between;align-items:center;}
header input{padding:6px;border-radius:5px;border:none;width:60%;}
header button{background:#22c55e;border:none;padding:6px 10px;border-radius:5px;color:white;}

.container{padding:10px;margin-bottom:70px;}
.hidden{display:none;}

.video-card{background:#181818;padding:10px;border-radius:8px;margin-bottom:15px;}
iframe{width:100%;border-radius:8px;}

.profile-mini{
width:30px;height:30px;border-radius:50%;
background:#555;display:flex;align-items:center;justify-content:center;
margin-right:8px;font-size:14px;
}

.bottom-nav{
position:fixed;bottom:0;width:100%;
background:black;display:flex;justify-content:space-around;
padding:10px 0;border-top:1px solid #222;
}
.bottom-nav button{background:none;color:white;border:none;}

.package{background:#181818;padding:15px;border-radius:8px;margin-top:10px;cursor:pointer;}
.info-btn{background:#2563eb;border:none;border-radius:50%;width:20px;height:20px;color:white;margin-left:5px;}

.menu-btn{background:none;border:none;color:white;font-size:18px;}
</style>
</head>

<body>

<header>
<input type="text" id="searchInput" placeholder="Search..." onkeyup="searchVideos()">
<button onclick="switchTab('premiumTab')">Premium</button>
</header>

<div class="container">

<!-- HOME -->
<div id="homeTab">
<div id="videoList"></div>
</div>

<!-- CREATE -->
<div id="createTab" class="hidden">
<h3>Add Video</h3>
<input type="text" id="videoTitle" placeholder="Title"><br><br>
<input type="text" id="videoLink" placeholder="YouTube Link"><br><br>
<button onclick="uploadCheck()">Upload</button>
</div>

<!-- PREMIUM -->
<div id="premiumTab" class="hidden">
<h2>Premium</h2>

<div class="package" onclick="showRedeem()">
₹50 Package
<button class="info-btn" onclick="showInfo(event)">?</button>
</div>

<div id="redeemBox" class="hidden">
<br>
<input type="text" id="redeemCode" placeholder="Enter Redeem Code">
<button onclick="submitRedeem()">Submit</button>
</div>
</div>

<!-- ME -->
<div id="meTab" class="hidden">
<h3>Your Videos</h3>
<div id="yourVideos"></div>

<h3>History</h3>
<div id="historyData"></div>
</div>

</div>

<div class="bottom-nav">
<button onclick="switchTab('homeTab')">Home</button>
<button onclick="switchTab('createTab')">Create</button>
<button onclick="switchTab('meTab')">Me</button>
</div>

<script>

let userName=localStorage.getItem("userName")||prompt("Enter Name")||"Guest";
localStorage.setItem("userName",userName);

let searchHistory=[];
let watchCount=0;
let halfWatch=0;

let videos=[
{title:"Rexxo Gameplay 1",id:"dQw4w9WgXcQ",owner:"Admin",time:Date.now()},
{title:"Rexxo Gameplay 2",id:"9bZkp7q19f0",owner:"Admin",time:Date.now()}
];

function timeAgo(t){
let h=Math.floor((Date.now()-t)/3600000);
return h<=1?"Just now":h+" hours ago";
}

function renderVideos(list=videos){
let box=document.getElementById("videoList");
box.innerHTML="";
list.forEach((v,i)=>{
let controls="";
if(v.owner===userName){
controls=`<button onclick="deleteVideo(${i})">Delete</button>`;
}else{
controls=`<button onclick="reportVideo()">Report</button>
<button onclick="blockUser('${v.owner}')">Block</button>`;
}

box.innerHTML+=`
<div class="video-card">
<div style="display:flex;justify-content:space-between;">
<h4>${v.title}</h4>
${controls}
</div>

<iframe src="https://www.youtube.com/embed/${v.id}" allowfullscreen 
onclick="watchCount++"></iframe>

<div style="display:flex;align-items:center;margin-top:5px;">
<div class="profile-mini">${v.owner.charAt(0).toUpperCase()}</div>
<span>${v.owner} • ${timeAgo(v.time)}</span>
</div>
</div>`;
});
}

function deleteVideo(i){videos.splice(i,1);renderVideos();}

function reportVideo(){alert("Reported");}
function blockUser(name){alert(name+" Blocked");}

function uploadCheck(){addVideo();}

function addVideo(){
let title=document.getElementById("videoTitle").value;
let link=document.getElementById("videoLink").value;
let id=link.split("v=")[1]||link.split("youtu.be/")[1];
if(!title||!id)return alert("Enter valid details");
videos.push({title,id,owner:userName,time:Date.now()});
renderVideos();
}

function searchVideos(){
let term=document.getElementById("searchInput").value.toLowerCase();
if(term) searchHistory.push(term);
renderVideos(videos.filter(v=>v.title.toLowerCase().includes(term)));
}

function switchTab(id){
["homeTab","createTab","premiumTab","meTab"].forEach(t=>document.getElementById(t).classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
if(id==="meTab") renderMe();
}

function showInfo(e){
e.stopPropagation();
alert("After purchasing Premium, your Shorts and Bio features will be unlocked.");
}

function showRedeem(){
document.getElementById("redeemBox").classList.remove("hidden");
}

function submitRedeem(){
let code=document.getElementById("redeemCode").value;
if(!code)return alert("Enter Code");
let phone="919607903090";
let msg=encodeURIComponent("Premium Redeem Request\nCode: "+code+"\nUser: "+userName);
window.open("https://wa.me/"+phone+"?text="+msg,"_blank");
}

function renderMe(){
let your=videos.filter(v=>v.owner===userName);
let yBox=document.getElementById("yourVideos");
yBox.innerHTML="";
your.forEach((v,i)=>{
yBox.innerHTML+=`
<div style="background:#222;padding:8px;margin-bottom:8px;display:flex;justify-content:space-between;">
${v.title}
<button class="menu-btn" onclick="editVideo(${i})">⋮</button>
</div>`;
});

document.getElementById("historyData").innerHTML=
"Searches: "+searchHistory.join(", ")+"<br>"+
"Videos Watched: "+watchCount+"<br>"+
"Half Watched: "+halfWatch;
}

function editVideo(i){
let newTitle=prompt("Edit Title:",videos[i].title);
if(newTitle) videos[i].title=newTitle;
renderVideos();
renderMe();
}

renderVideos();

</script>

</body>
</html>
